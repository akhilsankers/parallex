<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Parallax Scroll with Fade Effect</title>
    <link rel="stylesheet" href="./style.css">

</head>

<body>

    <div class="bgimg-1">
        <div class="caption">
            <span class="border">SCROLL DOWN</span>
        </div>
    </div>

    <div class="demo" style="color: #777;text-align:center;padding:50px 80px;text-align: justify;">
        <h3 style="text-align:center;">Parallax Demo</h3>
        <p>Parallax scrolling is a web site trend where the background content is moved at a different speed than the
            foreground content while scrolling. Nascetur per nec posuere turpis, lectus nec libero turpis nunc at, sed
            posuere mollis ullamcorper libero ante lectus, blandit pellentesque a, magna turpis est sapien duis blandit
            dignissim.</p>
    </div>

    <div class="bgimg-2">
        <div class="caption">
            <span class="border" style="background-color:transparent;font-size:25px;color: #f7f7f7;">LESS HEIGHT</span>
        </div>
    </div>

    <div style="position:relative;">
        <div style="color:#ddd;background-color:#282E34;text-align:center;padding:50px 80px;text-align: justify;">
            <p>Scroll up and down to really get the feeling of how Parallax Scrolling works.</p>
        </div>
    </div>

    <div class="bgimg-3">
        <div class="caption">
            <span class="border" style="background-color:transparent;font-size:25px;color: #f7f7f7;">SCROLL UP</span>
        </div>
    </div>

    <div style="position:relative;">
        <div style="color:#ddd;background-color:#282E34;text-align:center;padding:50px 80px;text-align: justify;">
            <p>Scroll up and down to really get the feeling of how Parallax Scrolling works.</p>
        </div>
    </div>

    <div class="bgimg-1">
        <div class="caption">
            <span class="border">COOL!</span>
        </div>
    </div>

    <script>
        window.addEventListener("scroll", function () {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            let fadeFactor = 600; // Adjust this value to control fade intensity

            document.querySelectorAll(".bgimg-1, .bgimg-2, .bgimg-3").forEach((element) => {
                let elementTop = element.offsetTop;
                let distance = Math.max(0, fadeFactor - (scrollTop - elementTop));
                let opacity = Math.max(0.1, distance / fadeFactor); // Ensures it doesn't become fully invisible
                element.style.opacity = opacity;
            });
        });


        document.addEventListener("scroll", function () {
            let scrollPos = window.scrollY;
            let halfWindowHeight = window.innerHeight / 2;
            if (scrollPos > halfWindowHeight) {
                let scale = 1 + scrollPos * 0.0004;
                let opacity = Math.max(1 - scrollPos * 0.0008, 0);
                document.querySelector(".demo").style.setProperty("--scale", scale);
                document.querySelector(".demo").style.setProperty("--opacity", opacity);

            } else {
                // Reset values before the halfway point
                document.querySelector(".demo").style.setProperty("--scale", 1);
                document.querySelector(".demo").style.setProperty("--opacity", 1);
            }
        });


    </script>

</body>

</html>